# Recipe AI Insights V2 - Professional Architecture

## üéØ –¶–µ–ª—å
–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å AI insights –≤ **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —à–µ—Ñ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∞**, –∫–æ—Ç–æ—Ä—ã–π:
- –î–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–µ—Ü–µ–ø—Ç –Ω–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∑–∞–º–µ–Ω—ã
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–≥–∏–π JSON-–∫–æ–Ω—Ç—Ä–∞–∫—Ç

---

## üìã JSON –ö–æ–Ω—Ç—Ä–∞–∫—Ç (–°—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ AI)

```json
{
  "steps": [
    {
      "n": 1,
      "title": "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤",
      "details": [
        "–î–æ—Å—Ç–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞ –∑–∞ 30 –º–∏–Ω—É—Ç",
        "–ü—Ä–æ—Å–µ—è—Ç—å –º—É–∫—É —á–µ—Ä–µ–∑ –º–µ–ª–∫–æ–µ —Å–∏—Ç–æ",
        "–†–∞–∑–º—è–≥—á–∏—Ç—å –º–∞—Å–ª–æ –¥–æ –∫–æ–º–Ω–∞—Ç–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã"
      ],
      "time_min": 10,
      "temp_c": null,
      "ccp": ["–ú–∞—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º—è–≥–∫–∏–º, –Ω–æ –Ω–µ —Ä–∞—Å—Ç–æ–ø–ª–µ–Ω–Ω—ã–º"]
    },
    {
      "n": 2,
      "title": "–ó–∞–º–µ—Å —Ç–µ—Å—Ç–∞",
      "details": [
        "–°–º–µ—à–∞—Ç—å –º—É–∫—É, —Ä–∞–∑—Ä—ã—Ö–ª–∏—Ç–µ–ª—å –∏ —Å–æ–ª—å",
        "–í–∑–±–∏—Ç—å –º–∞—Å–ª–æ —Å —Å–∞—Ö–∞—Ä–æ–º –¥–æ –ø—ã—à–Ω–æ–π –º–∞—Å—Å—ã",
        "–î–æ–±–∞–≤–∏—Ç—å —è–π—Ü–∞ –ø–æ –æ–¥–Ω–æ–º—É, —Ç—â–∞—Ç–µ–ª—å–Ω–æ –≤–º–µ—à–∏–≤–∞—è"
      ],
      "time_min": 15,
      "temp_c": null,
      "ccp": ["–¢–µ—Å—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–¥–Ω–æ—Ä–æ–¥–Ω—ã–º –±–µ–∑ –∫–æ–º–∫–æ–≤"]
    },
    {
      "n": 3,
      "title": "–í—ã–ø–µ–∫–∞–Ω–∏–µ",
      "details": [
        "–†–∞–∑–æ–≥—Ä–µ—Ç—å –¥—É—Ö–æ–≤–∫—É –¥–æ 175¬∞C",
        "–í—ã–ª–æ–∂–∏—Ç—å —Ç–µ—Å—Ç–æ –≤ —Å–º–∞–∑–∞–Ω–Ω—É—é —Ñ–æ—Ä–º—É",
        "–í—ã–ø–µ–∫–∞—Ç—å 35-40 –º–∏–Ω—É—Ç –¥–æ –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–π –∫–æ—Ä–∫–∏"
      ],
      "time_min": 40,
      "temp_c": 175,
      "ccp": [
        "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑—É–±–æ—á–∏—Å—Ç–∫–æ–π - –¥–æ–ª–∂–Ω–∞ –≤—ã—Ö–æ–¥–∏—Ç—å —Å—É—Ö–æ–π",
        "–ó–æ–ª–æ—Ç–∏—Å—Ç–∞—è –∫–æ—Ä–∫–∞ –±–µ–∑ –ø–æ–¥–≥–æ—Ä–∞–Ω–∏—è"
      ]
    }
  ],
  "validation": {
    "errors": [
      {
        "code": "MISSING_BINDER",
        "message": "–î–ª—è —Ç–æ—Ä—Ç–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–≤—è–∑—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (—è–π—Ü–æ/–º—É–∫–∞/–∂–µ–ª–∞—Ç–∏–Ω)"
      },
      {
        "code": "NO_THERMAL_STEP",
        "message": "–í –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö –Ω–µ—Ç —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–≤—ã–ø–µ–∫–∞–Ω–∏–µ/–≤–∞—Ä–∫–∞/–∂–∞—Ä–∫–∞)"
      }
    ],
    "warnings": [
      {
        "code": "NAME_MISMATCH",
        "message": "–ù–∞–∑–≤–∞–Ω–∏–µ '–¢–æ—Ä—Ç' –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Å—Ç–∞–≤—É –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤"
      },
      {
        "code": "UNREALISTIC_TIME",
        "message": "–£–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (5 –º–∏–Ω) –Ω–µ—Ä–µ–∞–ª—å–Ω–æ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –±–ª—é–¥–∞"
      }
    ],
    "missing": [
      {
        "role": "binder",
        "examples": ["—è–π—Ü–æ", "–º—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è", "–∂–µ–ª–∞—Ç–∏–Ω"]
      },
      {
        "role": "leavening",
        "examples": ["—Ä–∞–∑—Ä—ã—Ö–ª–∏—Ç–µ–ª—å", "—Å–æ–¥–∞ –ø–∏—â–µ–≤–∞—è", "–¥—Ä–æ–∂–∂–∏"]
      }
    ]
  },
  "suggestions": {
    "fixes": [
      {
        "title": "–°–¥–µ–ª–∞—Ç—å –¥–µ—Å–µ—Ä—Ç–æ–º –±–µ–∑ –≤—ã–ø–µ—á–∫–∏ (—á–∏–∑–∫–µ–π–∫)",
        "changes": [
          "–î–æ–±–∞–≤–∏—Ç—å —Ç–≤–æ—Ä–æ–∂–Ω—ã–π —Å—ã—Ä 500–≥",
          "–î–æ–±–∞–≤–∏—Ç—å –∂–µ–ª–∞—Ç–∏–Ω 20–≥",
          "–û—Ö–ª–∞–∂–¥–∞—Ç—å –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ 4 —á–∞—Å–∞ –≤–º–µ—Å—Ç–æ –≤—ã–ø–µ–∫–∞–Ω–∏—è"
        ]
      }
    ],
    "substitutions": [
      {
        "ingredient": "–º–∏–Ω–¥–∞–ª—å",
        "options": ["—Ñ—É–Ω–¥—É–∫", "–≥—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö", "–∫–µ—à—å—é"],
        "note": "–í–Ω–∏–º–∞–Ω–∏–µ: –º–∏–Ω–¥–∞–ª—å - –∞–ª–ª–µ—Ä–≥–µ–Ω"
      },
      {
        "ingredient": "—Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ",
        "options": ["—Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞—Å–ª–æ 75%", "–º–∞—Ä–≥–∞—Ä–∏–Ω –¥–ª—è –≤—ã–ø–µ—á–∫–∏"],
        "note": "–í–∫—É—Å –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è"
      }
    ]
  },
  "feasibility_score": 35
}
```

---

## üîç Validation Codes (–∫–æ–¥—ã –æ—à–∏–±–æ–∫)

### Errors (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ - –±–ª—é–¥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ)
- `MISSING_BINDER` - –Ω–µ—Ç —Å–≤—è–∑—É—é—â–µ–≥–æ (—è–π—Ü–æ/–º—É–∫–∞/–∂–µ–ª–∞—Ç–∏–Ω/–∫—Ä–∞—Ö–º–∞–ª)
- `MISSING_BASE` - –Ω–µ—Ç –æ—Å–Ω–æ–≤—ã (–¥–ª—è —Ç–æ—Ä—Ç–∞/–ø–∏—Ä–æ–≥–∞/—Ö–ª–µ–±–∞)
- `NO_THERMAL_STEP` - –Ω–µ—Ç —Ç–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –±–ª—é–¥–∞, —Ç—Ä–µ–±—É—é—â–µ–≥–æ –µ—ë
- `UNREALISTIC_TIME` - –Ω–µ—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (2 –º–∏–Ω –¥–ª—è —Ç–æ—Ä—Ç–∞)
- `TEMPERATURE_CONFLICT` - –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–µ —Ä–µ–∂–∏–º—ã
- `QUANTITY_MISMATCH` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ—Ä—Ü–∏—è–º

### Warnings (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ - –º–æ–∂–Ω–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å, –Ω–æ —Å—Ç—Ä–∞–Ω–Ω–æ)
- `NAME_MISMATCH` - –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Å—Ç–∞–≤—É
- `NO_SALT_SWEET_BALANCE` - –¥–ª—è —Å–ª–∞–¥–∫–æ–≥–æ –Ω–µ—Ç –ø–æ–¥—Å–ª–∞—Å—Ç–∏—Ç–µ–ª—è
- `NO_SEASONING` - –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–ª—é–¥–∞ –Ω–µ—Ç –ø—Ä–∏–ø—Ä–∞–≤/—Å–æ–ª–∏
- `MISSING_LIQUID` - –º–∞–ª–æ –∂–∏–¥–∫–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∞/—Å–æ—É—Å–∞
- `ALLERGEN_RISK` - –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞–ª–ª–µ—Ä–≥–µ–Ω—ã

---

## üìê –†–æ–ª–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏)

### –í–∞—Ä–∏–∞–Ω—Ç A: Keyword Map (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)

```rust
// src/domain/ingredient_roles.rs
pub enum IngredientRole {
    Base,       // –æ—Å–Ω–æ–≤–∞ (–º—É–∫–∞, —Ä–∏—Å, –º–∞–∫–∞—Ä–æ–Ω—ã, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å)
    Binder,     // —Å–≤—è–∑—É—é—â–µ–µ (—è–π—Ü–æ, –∂–µ–ª–∞—Ç–∏–Ω, –∫—Ä–∞—Ö–º–∞–ª)
    Leavening,  // —Ä–∞–∑—Ä—ã—Ö–ª–∏—Ç–µ–ª—å (—Å–æ–¥–∞, –¥—Ä–æ–∂–∂–∏, —Ä–∞–∑—Ä—ã—Ö–ª–∏—Ç–µ–ª—å)
    Liquid,     // –∂–∏–¥–∫–æ—Å—Ç—å (–≤–æ–¥–∞, –º–æ–ª–æ–∫–æ, –±—É–ª—å–æ–Ω)
    Fat,        // –∂–∏—Ä (–º–∞—Å–ª–æ, –º–∞—Ä–≥–∞—Ä–∏–Ω, —Å–ª–∏–≤–∫–∏)
    Protein,    // –±–µ–ª–æ–∫ (–º—è—Å–æ, —Ä—ã–±–∞, –ø—Ç–∏—Ü–∞, –±–æ–±–æ–≤—ã–µ)
    Sweetener,  // –ø–æ–¥—Å–ª–∞—Å—Ç–∏—Ç–µ–ª—å (—Å–∞—Ö–∞—Ä, –º–µ–¥, —Å–∏—Ä–æ–ø)
    Seasoning,  // –ø—Ä–∏–ø—Ä–∞–≤—ã (—Å–æ–ª—å, –ø–µ—Ä–µ—Ü, —Å–ø–µ—Ü–∏–∏)
    Acid,       // –∫–∏—Å–ª–æ—Ç–∞ (–ª–∏–º–æ–Ω, —É–∫—Å—É—Å, —Ç–æ–º–∞—Ç—ã)
    Vegetable,  // –æ–≤–æ—â–∏
    Fruit,      // —Ñ—Ä—É–∫—Ç—ã
    Dairy,      // –º–æ–ª–æ—á–∫–∞
    Allergen,   // –∞–ª–ª–µ—Ä–≥–µ–Ω—ã (–æ—Ä–µ—Ö–∏, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã)
}

lazy_static! {
    static ref ROLE_KEYWORDS: HashMap<IngredientRole, Vec<&'static str>> = {
        let mut m = HashMap::new();
        m.insert(IngredientRole::Base, vec![
            "–º—É–∫–∞", "—Ä–∏—Å", "–º–∞–∫–∞—Ä–æ–Ω", "–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å", "–∫—Ä—É–ø–∞", "flour", "rice"
        ]);
        m.insert(IngredientRole::Binder, vec![
            "—è–π—Ü–æ", "–∂–µ–ª–∞—Ç–∏–Ω", "–∫—Ä–∞—Ö–º–∞–ª", "–∞–≥–∞—Ä", "egg", "gelatin", "starch"
        ]);
        m.insert(IngredientRole::Leavening, vec![
            "—Ä–∞–∑—Ä—ã—Ö–ª–∏—Ç–µ–ª—å", "—Å–æ–¥–∞", "–¥—Ä–æ–∂–∂–∏", "baking powder", "yeast"
        ]);
        // ... –∏ —Ç.–¥.
        m
    };
}
```

### –í–∞—Ä–∏–∞–Ω—Ç B: Database Roles (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ)

```sql
-- –ë—É–¥—É—â–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–ø–æ—Å–ª–µ MVP)
ALTER TABLE catalog_ingredients 
ADD COLUMN roles TEXT[] DEFAULT '{}';

-- –ü—Ä–∏–º–µ—Ä—ã:
UPDATE catalog_ingredients SET roles = ARRAY['base', 'binder'] WHERE name_en = 'wheat flour';
UPDATE catalog_ingredients SET roles = ARRAY['binder', 'protein'] WHERE name_en = 'egg';
UPDATE catalog_ingredients SET roles = ARRAY['allergen'] WHERE name_en LIKE '%almond%';
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```
src/
‚îú‚îÄ‚îÄ application/
‚îÇ   ‚îú‚îÄ‚îÄ recipe_v2_ai_service.rs          // AI generation + translation
‚îÇ   ‚îú‚îÄ‚îÄ recipe_v2_validator.rs           // Rule-based validation BEFORE AI
‚îÇ   ‚îî‚îÄ‚îÄ recipe_v2_insights_orchestrator.rs // –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç validator + AI + translation
‚îÇ
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ recipe_ai_insights_v2.rs         // –ù–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
‚îÇ   ‚îî‚îÄ‚îÄ ingredient_roles.rs              // –†–æ–ª–∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îú‚îÄ‚îÄ persistence/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recipe_ai_insights_repository.rs  // –£–∂–µ –µ—Å—Ç—å, –æ–±–Ω–æ–≤–∏–º —Å—Ö–µ–º—É
‚îÇ   ‚îî‚îÄ‚îÄ groq_service.rs                  // –£–∂–µ –µ—Å—Ç—å, –æ–±–Ω–æ–≤–∏–º prompt
‚îÇ
‚îî‚îÄ‚îÄ interfaces/http/
    ‚îî‚îÄ‚îÄ recipe_v2_insights.rs            // HTTP handlers –¥–ª—è insights
```

---

## üîÑ Workflow –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI Insights

### 1. POST /api/recipes/v2 (—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞)

```rust
async fn create_recipe(dto: CreateRecipeDto) -> RecipeResponseDto {
    // 1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç
    let recipe = recipe_service.create_recipe(dto).await?;
    
    // 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é insights –≤ —Ñ–æ–Ω–µ (–Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç)
    tokio::spawn(async move {
        insights_orchestrator.generate_and_translate(recipe.id).await;
    });
    
    // 3. –í–µ—Ä–Ω—É—Ç—å —Ä–µ—Ü–µ–ø—Ç —Å—Ä–∞–∑—É (–±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è AI)
    Ok(recipe)
}
```

### 2. Orchestrator –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å

```rust
// src/application/recipe_v2_insights_orchestrator.rs
pub async fn generate_and_translate(&self, recipe_id: RecipeId) {
    // 1. Rule-based –≤–∞–ª–∏–¥–∞—Ü–∏—è (–±—ã—Å—Ç—Ä–æ, ~5ms)
    let validation_result = self.validator.validate(&recipe).await?;
    
    // 2. AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ default —è–∑—ã–∫–µ (–º–µ–¥–ª–µ–Ω–Ω–æ, ~2-3s)
    let insights = self.ai_service.generate_insights(
        recipe_id,
        recipe.language_default,
        validation_result  // –ø–µ—Ä–µ–¥–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ prompt
    ).await?;
    
    // 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å insights
    self.repository.save(&insights).await?;
    
    // 4. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
    let target_langs = vec!["en", "pl", "uk"];
    for lang in target_langs {
        if lang != recipe.language_default {
            tokio::spawn({
                let service = self.ai_service.clone();
                let recipe_id = recipe_id.clone();
                async move {
                    service.translate_insights(recipe_id, lang).await;
                }
            });
        }
    }
}
```

### 3. GET /api/recipes/v2/:id/insights?lang=ru

```rust
async fn get_insights(
    recipe_id: Uuid,
    lang: String
) -> Result<Json<AIInsightsResponse>, AppError> {
    match repository.find_by_recipe_and_lang(recipe_id, &lang).await? {
        Some(insights) => Ok(Json(insights)),
        None => {
            // Insights –µ—â–µ –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
            // –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 202 Accepted –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
            Err(AppError::not_found("AI insights are being generated"))
        }
    }
}
```

### 4. POST /api/recipes/v2/:id/insights/refresh

```rust
async fn refresh_insights(recipe_id: Uuid) -> StatusCode {
    // –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ insights
    repository.delete_by_recipe(recipe_id).await?;
    
    // –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
    tokio::spawn(async move {
        orchestrator.generate_and_translate(recipe_id).await;
    });
    
    Ok(StatusCode::ACCEPTED)  // 202 - processing started
}
```

---

## ü§ñ AI Prompt (System Message)

```rust
const SYSTEM_PROMPT: &str = r#"
–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —à–µ—Ñ-—Ç–µ—Ö–Ω–æ–ª–æ–≥ —Å 20-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º.

–ó–ê–î–ê–ß–ê:
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ä–µ—Ü–µ–ø—Ç –∏ —Å–æ—Å—Ç–∞–≤—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –∫–∞—Ä—Ç—É.

–ü–†–ê–í–ò–õ–ê:
1. –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
2. –°–ª–µ–¥—É–π –°–¢–†–û–ì–û —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ö–µ–º–µ
3. –ï—Å–ª–∏ –±–ª—é–¥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å - —É–∫–∞–∂–∏ errors –∏ –Ω–∏–∑–∫–∏–π feasibility_score
4. –ù–ï –≤—ã–¥—É–º—ã–≤–∞–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã - –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –¥–∞–Ω—ã
5. –í missing/suggestions –º–æ–∂–µ—à—å –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
6. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è (CCP) - —ç—Ç–æ –º–æ–º–µ–Ω—Ç—ã, –≥–¥–µ –ª–µ–≥–∫–æ –æ—à–∏–±–∏—Ç—å—Å—è
7. –í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º (—Ç–æ—Ä—Ç –Ω–µ –≤—ã–ø–µ–∫–∞–µ—Ç—Å—è –∑–∞ 5 –º–∏–Ω—É—Ç)

–°–¢–†–£–ö–¢–£–†–ê:
- steps: —Ä–∞–∑–±–µ–π –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —ç—Ç–∞–ø—ã
- validation: –Ω–∞–π–¥–∏ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- suggestions: –ø—Ä–µ–¥–ª–æ–∂–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∑–∞–º–µ–Ω—ã
- feasibility_score: 0-100 (100 = –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç, 0 = –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ)

–Ø–ó–´–ö:
–û—Ç–≤–µ—á–∞–π –Ω–∞ —è–∑—ã–∫–µ: {language}
"#;

fn build_prompt(recipe: &Recipe, validation: &ValidationResult, language: &str) -> String {
    format!(
        r#"{system_prompt}

–†–ï–¶–ï–ü–¢:
–ù–∞–∑–≤–∞–Ω–∏–µ: {name}
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: {instructions}
–ü–æ—Ä—Ü–∏–π: {servings}

–ò–ù–ì–†–ï–î–ò–ï–ù–¢–´:
{ingredients}

–ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø:
–û—à–∏–±–∫–∏: {errors}
–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: {warnings}
–ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ä–æ–ª–∏: {missing}

–í–µ—Ä–Ω–∏ JSON –ø–æ —Å—Ö–µ–º–µ:
{{
  "steps": [{{ "n": 1, "title": "...", "details": ["..."], "time_min": 10, "temp_c": null, "ccp": ["..."] }}],
  "validation": {{
    "errors": [{{ "code": "CODE", "message": "..." }}],
    "warnings": [{{ "code": "CODE", "message": "..." }}],
    "missing": [{{ "role": "role_name", "examples": ["..."] }}]
  }},
  "suggestions": {{
    "fixes": [{{ "title": "...", "changes": ["..."] }}],
    "substitutions": [{{ "ingredient": "...", "options": ["..."], "note": "..." }}]
  }},
  "feasibility_score": 85
}}
"#,
        system_prompt = SYSTEM_PROMPT,
        name = recipe.name_default,
        instructions = recipe.instructions_default,
        servings = recipe.servings,
        ingredients = format_ingredients(&recipe.ingredients),
        errors = format_errors(&validation.errors),
        warnings = format_warnings(&validation.warnings),
        missing = format_missing(&validation.missing_roles)
    )
}
```

---

## üõ°Ô∏è –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

### 1. Rule-based –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ü–ï–†–ï–î AI)

```rust
// src/application/recipe_v2_validator.rs
pub struct RecipeValidator {
    ingredient_roles: IngredientRoleService,
}

impl RecipeValidator {
    pub async fn validate(&self, recipe: &Recipe) -> ValidationResult {
        let mut errors = Vec::new();
        let mut warnings = Vec::new();
        let mut missing_roles = Vec::new();
        
        // –ê–Ω–∞–ª–∏–∑ —Ä–æ–ª–µ–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
        let roles = self.analyze_ingredient_roles(&recipe.ingredients).await;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ç–∏–ø—É –±–ª—é–¥–∞ (–∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è)
        let dish_type = self.detect_dish_type(&recipe.name_default);
        
        match dish_type {
            DishType::Cake | DishType::Pie | DishType::Bread => {
                // –ù—É–∂–Ω—ã: base + binder + leavening
                if !roles.contains(&IngredientRole::Binder) {
                    errors.push(ValidationError {
                        code: "MISSING_BINDER".to_string(),
                        message: format!("–î–ª—è {} –Ω–µ—Ç —Å–≤—è–∑—É—é—â–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞", dish_type),
                    });
                    missing_roles.push(MissingRole {
                        role: "binder",
                        examples: vec!["—è–π—Ü–æ", "–∂–µ–ª–∞—Ç–∏–Ω", "–∫—Ä–∞—Ö–º–∞–ª"],
                    });
                }
                
                if !roles.contains(&IngredientRole::Leavening) {
                    warnings.push(ValidationWarning {
                        code: "MISSING_LEAVENING".to_string(),
                        message: "–ù–µ—Ç —Ä–∞–∑—Ä—ã—Ö–ª–∏—Ç–µ–ª—è - —Ç–µ—Å—Ç–æ –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–Ω—è—Ç—å—Å—è".to_string(),
                    });
                }
            },
            DishType::Dessert => {
                if !roles.contains(&IngredientRole::Sweetener) {
                    warnings.push(ValidationWarning {
                        code: "NO_SWEET".to_string(),
                        message: "–î–ª—è –¥–µ—Å–µ—Ä—Ç–∞ –Ω–µ—Ç –ø–æ–¥—Å–ª–∞—Å—Ç–∏—Ç–µ–ª—è".to_string(),
                    });
                }
            },
            _ => {}
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
        if self.requires_thermal(&dish_type) && !self.has_thermal_step(&recipe.instructions_default) {
            errors.push(ValidationError {
                code: "NO_THERMAL_STEP".to_string(),
                message: "–í –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö –Ω–µ—Ç —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏".to_string(),
            });
        }
        
        ValidationResult { errors, warnings, missing_roles }
    }
}
```

### 2. AI –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã

–í prompt —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º:
```
–ù–ï –¥–æ–±–∞–≤–ª—è–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –≤ steps!
–ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û —Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, —á—Ç–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã.
–ï—Å–ª–∏ —á–µ–≥–æ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç - —É–∫–∞–∂–∏ –≤ missing.
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ AI

```rust
fn validate_ai_response(response: &str) -> Result<AIInsights, AppError> {
    // 1. –ü–æ–ø—ã—Ç–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
    let insights: AIInsights = serde_json::from_str(response)
        .map_err(|e| AppError::internal(format!("AI returned invalid JSON: {}", e)))?;
    
    // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    if insights.steps.is_empty() {
        return Err(AppError::internal("AI returned empty steps"));
    }
    
    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ feasibility_score –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
    if insights.feasibility_score < 0 || insights.feasibility_score > 100 {
        return Err(AppError::internal("Invalid feasibility_score"));
    }
    
    // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º)
    for step in &insights.steps {
        if step.time_min < 0 {
            return Err(AppError::internal("Negative time in step"));
        }
    }
    
    Ok(insights)
}
```

---

## üìä Performance & Caching

- **Rule-based validation**: ~5ms (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º)
- **AI generation**: ~2-3s (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)
- **Translation**: ~1-2s per language (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤ –ë–î `recipe_ai_insights`, 1 –∑–∞–ø–∏—Å—å –Ω–∞ (recipe_id, language)

---

## üöÄ Endpoints (MVP)

```
POST   /api/recipes/v2                     # –°–æ–∑–¥–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç + –∑–∞–ø—É—Å—Ç–∏—Ç—å AI –≤ —Ñ–æ–Ω–µ
GET    /api/recipes/v2/:id                 # –ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç
GET    /api/recipes/v2/:id/insights?lang=ru # –ü–æ–ª—É—á–∏—Ç—å AI insights (202 –µ—Å–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è)
POST   /api/recipes/v2/:id/insights/refresh # –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å insights
POST   /api/recipes/v2/:id/publish         # –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å (is_public=true)
GET    /api/recipes/v2/public?lang=pl&q=... # –ü–æ–∏—Å–∫ –ø–æ –ø—É–±–ª–∏—á–Ω—ã–º —Ä–µ—Ü–µ–ø—Ç–∞–º
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Phase 1: –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å `src/domain/recipe_ai_insights_v2.rs` —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π
- [ ] –°–æ–∑–¥–∞—Ç—å `src/domain/ingredient_roles.rs` —Å keyword map
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ø–æ–¥ –Ω–æ–≤—É—é JSON —Å—Ö–µ–º—É

### Phase 2: –í–∞–ª–∏–¥–∞—Ç–æ—Ä
- [ ] –°–æ–∑–¥–∞—Ç—å `src/application/recipe_v2_validator.rs`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é —Ç–∏–ø–∞ –±–ª—é–¥–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ —Ä–æ–ª–µ–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (5-7 –æ—Å–Ω–æ–≤–Ω—ã—Ö)

### Phase 3: AI Service
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Groq prompt –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ö–µ–º—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å integration —Å validator
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥ insights

### Phase 4: Orchestrator
- [ ] –°–æ–∑–¥–∞—Ç—å `recipe_v2_insights_orchestrator.rs`
- [ ] –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å validator ‚Üí AI ‚Üí translation
- [ ] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞

### Phase 5: HTTP API
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `POST /api/recipes/v2` - –∑–∞–ø—É—Å–∫–∞—Ç—å AI –≤ —Ñ–æ–Ω–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å `GET /api/recipes/v2/:id/insights`
- [ ] –î–æ–±–∞–≤–∏—Ç—å `POST /api/recipes/v2/:id/insights/refresh`

### Phase 6: Testing
- [ ] Unit tests –¥–ª—è validator
- [ ] Integration tests –¥–ª—è AI service
- [ ] E2E test: create recipe ‚Üí wait ‚Üí get insights

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Frontend: –ü–æ–ª—É—á–µ–Ω–∏–µ insights

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç
const recipe = await api.post('/api/recipes/v2', recipeData);

// 2. –°—Ä–∞–∑—É –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç, insights –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–æ–Ω–µ
showRecipe(recipe);

// 3. Polling –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ insights
const checkInsights = setInterval(async () => {
  try {
    const insights = await api.get(`/api/recipes/v2/${recipe.id}/insights?lang=ru`);
    clearInterval(checkInsights);
    showAIInsights(insights);
  } catch (error) {
    if (error.status !== 404) {
      clearInterval(checkInsights);
    }
  }
}, 2000);
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ

```tsx
<div className="ai-insights">
  {/* –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è */}
  <section>
    <h3>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è</h3>
    {insights.steps.map(step => (
      <div key={step.n} className="step">
        <h4>–®–∞–≥ {step.n}: {step.title}</h4>
        <ul>
          {step.details.map(d => <li>{d}</li>)}
        </ul>
        <div className="meta">
          {step.time_min && <span>‚è±Ô∏è {step.time_min} –º–∏–Ω</span>}
          {step.temp_c && <span>üå°Ô∏è {step.temp_c}¬∞C</span>}
        </div>
        {step.ccp.length > 0 && (
          <div className="ccp">
            <strong>‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è:</strong>
            {step.ccp.map(c => <span>{c}</span>)}
          </div>
        )}
      </div>
    ))}
  </section>

  {/* –í–∞–ª–∏–¥–∞—Ü–∏—è */}
  {insights.validation.errors.length > 0 && (
    <section className="errors">
      <h3>‚ùå –û—à–∏–±–∫–∏</h3>
      {insights.validation.errors.map(e => (
        <div className="error">{e.message}</div>
      ))}
    </section>
  )}

  {/* –°–æ–≤–µ—Ç—ã */}
  {insights.suggestions.fixes.length > 0 && (
    <section className="suggestions">
      <h3>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
      {insights.suggestions.fixes.map(fix => (
        <div>
          <strong>{fix.title}</strong>
          <ul>{fix.changes.map(c => <li>{c}</li>)}</ul>
        </div>
      ))}
    </section>
  )}

  {/* –û—Ü–µ–Ω–∫–∞ */}
  <div className="feasibility">
    <h3>–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å —Ä–µ—Ü–µ–ø—Ç–∞</h3>
    <progress value={insights.feasibility_score} max="100" />
    <span>{insights.feasibility_score}/100</span>
  </div>
</div>
```

---

## üéì –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ

1. **–°—Ç—Ä–æ–≥–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç**: JSON Schema –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
2. **Rule-based pre-validation**: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ AI
3. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è (CCP)**: HACCP-–ø–æ–¥—Ö–æ–¥ –∏–∑ –ø–∏—â–µ–≤–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏
4. **Feasibility score**: –ß–∏—Å–ª–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏
5. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ concerns**: Validator ‚Üí AI ‚Üí Translation
6. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: UI –Ω–µ –∂–¥—ë—Ç AI (2-3 —Å–µ–∫—É–Ω–¥—ã)
7. **–ü–µ—Ä–µ–≤–æ–¥—ã**: Insights –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
8. **–ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–∞–Ω—Ç–∞–∑–∏–π AI**: Rule-based –ø—Ä–æ–≤–µ—Ä–∫–∞ + —Å—Ç—Ä–æ–≥–∏–π prompt

---

**–ê–≤—Ç–æ—Ä**: Recipe AI Insights V2 Architecture
**–î–∞—Ç–∞**: 2026-02-16
**–°—Ç–∞—Ç—É—Å**: Ready for implementation
